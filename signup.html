<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2025 서울국제유소년대회 참가신청서</title>
  <style>
    body {
      font-family: 'Pretendard', 'Apple SD Gothic Neo', sans-serif;
      background: #f8fbfd;
      padding: 2rem;
      max-width: 800px;
      margin: auto;
      color: #222;
    }
    h1 {
      text-align: center;
      color: #1769ff;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 2rem;
    }
    label {
      display: block;
      margin: 1.5rem 0 0.3rem;
      font-weight: 600;
    }
    input, select {
      padding: 0.7rem 1rem;
      border: 1.5px solid #e3e8f0;
      border-radius: 12px;
      font-size: 1rem;
      background: #fff;
      transition: border 0.2s;
      box-sizing: border-box;
      outline: none;
    }
    input:focus, select:focus {
      border-color: #1769ff;
      background: #f4f8ff;
    }
    button {
      margin-top: 2rem;
      padding: 0.9rem 0;
      width: 100%;
      font-size: 1.1rem;
      font-weight: 700;
      background-color: #1769ff;
      color: #fff;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 2px 8px #1769ff20;
      letter-spacing: 0.1em;
    }
    button:hover {
      background-color: #1253c8;
    }
    .success {
      margin-top: 1.5rem;
      color: #14a25c;
      font-size: 1.1rem;
      text-align: center;
    }
    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      margin-top: 1rem;
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 1px 10px #0e25502a;
      overflow: hidden;
    }
    th, td {
      border-bottom: 1px solid #e3e8f0;
      padding: 0.4rem 0.3rem;
      text-align: center;
      font-size: 0.97rem;
    }
    th {
      background-color: #f4f8ff;
      color: #1769ff;
      font-weight: 700;
      border-bottom: 2.5px solid #1769ff50;
    }
    tr:last-child td { border-bottom: none; }
    td:first-child, th:first-child {
      width: 44px; min-width: 44px;
    }
    td:nth-child(2), th:nth-child(2) {
      width: 19%;
    }
    td:nth-child(3), th:nth-child(3) {
      width: 21%;
    }
    td:nth-child(4), th:nth-child(4) {
      width: 14%;
    }
    td:nth-child(5), th:nth-child(5) {
      width: 15%;
    }
    input[type='date'] {
      min-width: 105px;
    }
    input[type='number'] {
      min-width: 50px;
      text-align: center;
    }
    select {
      min-width: 70px;
      background: #f7faff;
    }
    .notice {
      margin-top: 2rem;
      font-size: 0.96rem;
      color: #1556af;
      text-align: center;
      background: #e6f1fe;
      border-radius: 10px;
      padding: 1rem 0.5rem;
    }
    .admin-link {
      text-align: right;
      margin-top: 2rem;
    }
    .admin-link a {
      color: #1769ff;
      text-decoration: underline;
      font-size: 1rem;
      font-weight: 500;
    }
  </style>
</head>
<body>
  <h1>2025 서울국제유소년대회 참가신청서</h1>
  <form id="signupForm">
    <label for="division">종별</label>
    <select id="division" name="division" required>
      <option value="">선택</option>
      <option value="U12B">U12B (남)</option>
      <option value="U14B">U14B (남)</option>
      <option value="U14G">U14G (여)</option>
      <option value="U16B">U16B (남)</option>
      <option value="U16G">U16G (여)</option>
    </select>

    <label for="team">팀명</label>
    <input type="text" id="team" name="team" required />

    <label for="manager">대표자 이름</label>
    <input type="text" id="manager" name="manager" required />

    <label for="contact">대표자 연락처</label>
    <input type="text" id="contact" name="contact" placeholder="예: 010-1234-5678" required />

    <label style="margin-top:1.7rem;">참가선수명단 (최대 20명)</label>
    <table id="playersTable">
      <thead>
        <tr>
          <th>순번</th>
          <th>이름</th>
          <th>생년월일</th>
          <th>등번호</th>
          <th>포지션</th>
        </tr>
      </thead>
      <tbody>
        <script>
          for (let i = 0; i < 20; i++) {
            document.write(`
              <tr>
                <td>${i + 1}</td>
                <td><input type="text" name="player_name_${i}" maxlength="10" autocomplete="off" /></td>
                <td><input type="date" name="player_birth_${i}" autocomplete="off" /></td>
                <td><input type="number" name="player_number_${i}" min="0" max="99" autocomplete="off" /></td>
                <td>
                  <select name="player_position_${i}">
                    <option value="">선택</option>
                    <option value="G">G</option>
                    <option value="F">F</option>
                    <option value="C">C</option>
                  </select>
                </td>
              </tr>
            `);
          }
        </script>
      </tbody>
    </table>

    <p class="notice">
      ※ 상기 기재 내용이 사실과 다른 점이나 누락된 점이 발견될시 대회 참가가 취소될 수 있습니다. 최대한 자세하게 적어주시기 바랍니다.
    </p>

    <button type="submit">신청서 제출</button>
    <div class="success" id="successMessage"></div>
  </form>
  <div class="admin-link">
    <a href="admin.html" target="_blank">🔒 관리자 전용 신청 명단 보기</a>
  </div>

  <script>
    const SHEET_URL = 'https://script.google.com/macros/s/AKfycbxPrF7prma1E-92kMn_Z3t09-dR3c8iBhiByUE2_HvUem7AW-sLMS5avJ_YTV2GY6Wd/exec';

document.getElementById('signupForm').addEventListener('submit', async function (e) {
  e.preventDefault();

  const data = {
    division: document.getElementById('division').value,
    team: document.getElementById('team').value,
    manager: document.getElementById('manager').value,
    contact: document.getElementById('contact').value,
    players: []
  };
  const rows = document.querySelectorAll('#playersTable tbody tr');
  rows.forEach((row, i) => {
    const name = row.querySelector(`[name='player_name_${i}']`).value;
    const birth = row.querySelector(`[name='player_birth_${i}']`).value;
    const number = row.querySelector(`[name='player_number_${i}']`).value;
    const position = row.querySelector(`[name='player_position_${i}']`).value;
    if (name) {
      data.players.push({ name, birth, number, position });
    }
  });

  try {
    const response = await fetch(SHEET_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    if (response.ok) {
      document.getElementById('successMessage').textContent = '신청이 정상적으로 접수되었습니다!';
      document.getElementById('signupForm').reset();
    } else {
      document.getElementById('successMessage').textContent = '오류가 발생했습니다. 다시 시도해 주세요.';
    }
  } catch (error) {
    document.getElementById('successMessage').textContent = '네트워크 오류입니다. 관리자에게 문의하세요.';
  }
});
  </script>
</body>
</html>
