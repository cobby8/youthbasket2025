<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2025 ì„œìš¸êµ­ì œìœ ì†Œë…„ëŒ€íšŒ ì°¸ê°€ì‹ ì²­ì„œ</title>
  <style>
    body { font-family: sans-serif; background: #f9f9f9; padding: 2rem; max-width: 800px; margin: auto; }
    h1 { text-align: center; color: #333; }
    label { display: block; margin: 1rem 0 0.3rem; }
    input, select { width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 5px; font-size: 1rem; }
    button { margin-top: 1.5rem; padding: 0.8rem 1.2rem; font-size: 1rem; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; }
    button:hover { background-color: #45a049; }
    .success { margin-top: 1rem; color: green; }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    th, td { border: 1px solid #ccc; padding: 0.5rem; text-align: center; }
    th { background-color: #eee; }
    .admin-link { text-align: right; margin-top: 2rem; }
    .admin-link a { color: #333; text-decoration: none; font-size: 0.9rem; }
    .notice { margin-top: 2rem; font-size: 0.9rem; color: #444; }
  </style>
</head>
<body>
  <h1>2025 ì„œìš¸êµ­ì œìœ ì†Œë…„ëŒ€íšŒ ì°¸ê°€ì‹ ì²­ì„œ</h1>
  <form id="signupForm">
    <label for="division">ì¢…ë³„</label>
    <select id="division" name="division" required>
      <option value="">ì„ íƒ</option>
      <option value="U12B">U12B (ë‚¨)</option>
      <option value="U14B">U14B (ë‚¨)</option>
      <option value="U14G">U14G (ì—¬)</option>
      <option value="U16B">U16B (ë‚¨)</option>
      <option value="U16G">U16G (ì—¬)</option>
    </select>

    <label for="team">íŒ€ëª…</label>
    <input type="text" id="team" name="team" required />

    <label for="manager">ëŒ€í‘œì ì´ë¦„</label>
    <input type="text" id="manager" name="manager" required />

    <label for="contact">ëŒ€í‘œì ì—°ë½ì²˜</label>
    <input type="text" id="contact" name="contact" placeholder="ì˜ˆ: 010-1234-5678" required />

    <label>ì°¸ê°€ì„ ìˆ˜ëª…ë‹¨ (ìµœëŒ€ 20ëª…)</label>
    <table id="playersTable">
      <thead>
        <tr>
          <th>ìˆœë²ˆ</th>
          <th>ì´ë¦„</th>
          <th>ìƒë…„ì›”ì¼</th>
          <th>ë“±ë²ˆí˜¸</th>
          <th>í¬ì§€ì…˜</th>
        </tr>
      </thead>
      <tbody>
        <script>
          for (let i = 0; i < 20; i++) {
            document.write(`
              <tr>
                <td>${i + 1}</td>
                <td><input type="text" name="player_name_${i}" /></td>
                <td><input type="date" name="player_birth_${i}" /></td>
                <td><input type="number" name="player_number_${i}" /></td>
                <td>
                  <select name="player_position_${i}">
                    <option value="">ì„ íƒ</option>
                    <option value="G">G</option>
                    <option value="F">F</option>
                    <option value="C">C</option>
                  </select>
                </td>
              </tr>
            `);
          }
        </script>
      </tbody>
    </table>

    <p class="notice">
      â€» ìƒê¸° ê¸°ì¬ ë‚´ìš©ì´ ì‚¬ì‹¤ê³¼ ë‹¤ë¥¸ ì ì´ë‚˜ ëˆ„ë½ëœ ì ì´ ë°œê²¬ë ì‹œ ëŒ€íšŒ ì°¸ê°€ê°€ ì·¨ì†Œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìµœëŒ€í•œ ìì„¸í•˜ê²Œ ì ì–´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.
    </p>

    <button type="submit">ì‹ ì²­ì„œ ì œì¶œ</button>
    <div class="success" id="successMessage"></div>
  </form>
  <div class="admin-link">
    <a href="admin.html" target="_blank">ğŸ”’ ê´€ë¦¬ì ì „ìš© ì‹ ì²­ ëª…ë‹¨ ë³´ê¸°</a>
  </div>

  <script>
    const SHEET_URL = 'https://script.google.com/macros/s/AKfycbz7vXeC2DDLI9R-Nmf_6cXJwzC2Nm9uDe_HNDVxJHQHVnGuMrAwwNOqS-G3vOiF1QdZ/exec'; // â† ë³¸ì¸ ì›¹ì•± URL

    document.getElementById('signupForm').addEventListener('submit', async function (e) {
      e.preventDefault();

      const data = {
        division: document.getElementById('division').value,
        team: document.getElementById('team').value,
        manager: document.getElementById('manager').value,
        contact: document.getElementById('contact').value,
        players: []
      };

      const rows = document.querySelectorAll('#playersTable tbody tr');
      rows.forEach((row, i) => {
        const name = row.querySelector(`[name='player_name_${i}']`).value;
        const birth = row.querySelector(`[name='player_birth_${i}']`).value;
        const number = row.querySelector(`[name='player_number_${i}']`).value;
        const position = row.querySelector(`[name='player_position_${i}']`).value;
        if (name) {
          data.players.push({ name, birth, number, position });
        }
      });

      try {
        const response = await fetch(SHEET_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

        if (response.ok) {
          document.getElementById('successMessage').textContent = 'ì‹ ì²­ì´ ì •ìƒì ìœ¼ë¡œ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤!';
          document.getElementById('signupForm').reset();
        } else {
          document.getElementById('successMessage').textContent = 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.';
        }
      } catch (error) {
        document.getElementById('successMessage').textContent = 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì…ë‹ˆë‹¤. ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.';
      }
    });
  </script>
</body>
</html>
